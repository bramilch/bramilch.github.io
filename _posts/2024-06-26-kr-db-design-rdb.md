---
layout: post
title: 데이터베이스 설계 - RDB 편
author: bramilch
date: 2024-06-26 18:00:00 +0900
categories: [Backend, Data Engineering]
tags: [Backend, Data Engineering]
pin: true
math: false
toc: true
comments: false
mermaid: false
image:
  path: ./assets/img/posts/2024-06-26-kr-db-design-rdb/RDBMS_structure.png
---

<br>

> 2024/06/26: 초안 작성  
> 2024/06/28: 상향식, 하향식 디자인, 디자인 절차 추가, 보완  
 
※ 내용에 오류가 있을 수 있습니다.  
※ 내용을 계속 추가, 수정, 보완하고 있습니다.  

<br>

**목차**

- [머리말](#머리말)
- [관계형 데이터베이스 설계 RDB Design](#관계형-데이터베이스-설계-rdb-design)
  - [관계형 데이터베이스 설계 RDB Design란?](#관계형-데이터베이스-설계-rdb-design란)
  - [RDB 설계의 중요성](#rdb-설계의-중요성)
  - [RDB 설계 시 주요 개념](#rdb-설계-시-주요-개념)
- [상향식 DB 디자인(설계)와 하향식 DB 디자인(설계)](#상향식-db-디자인설계와-하향식-db-디자인설계)
  - [하향식 접근 방식 Top-Down Approach of DB Design](#하향식-접근-방식-top-down-approach-of-db-design)
  - [상향식 접근 방식 Bottom-Up Approach of DB Design](#상향식-접근-방식-bottom-up-approach-of-db-design)
- [상향식 DB 설계 절차](#상향식-db-설계-절차)
- [RDB 설계 고려 요소](#rdb-설계-고려-요소)
- [RDB 설계 시 주의할 점](#rdb-설계-시-주의할-점)
- [정규화 방법과 유용한 팁들](#정규화-방법과-유용한-팁들)
- [데이터베이스 관련 직군과 직무](#데이터베이스-관련-직군과-직무)

<br>

## 머리말

<br>

- 이어드림 스쿨에서 미니 프로젝트로 진행한 DB 설계 프로젝트를 경험하면서, 관계형 데이터베이스 설계의 어려움을 다시금 실감함.

- DB 설계 미니 프로젝트 회고는 별도 작성 예정

- DB 설계는 신중한 계획, 많은 고려가 필요하고, 체계적인 절차와 프레임워크가 필요하다는 것을 절감

- RDB 설계 시 어려웠던 부분 3가지

1. 서비스의 구체적 데이터 중 DB에 넣을 것과 넣지 않을 것을 구분하는 것

2. 서비스로서 확정된 것과 확장할 수 있는 것을 구분

3. 운영, 성능 측면에서 무결성, 일관성, 정규화, 비정규화를 고려하여 스키마 설계

- 여기선 RDB 설계 개념, 절차, 고려해야 할 요소들, 주의해야 할 점, 정규화을 잘할 수 있는 방법, 데이터베이스 관련 직무에 대해 다룸.

<br>

## 관계형 데이터베이스 설계 RDB Design

<br>

- LLM이 대세이고, 비정형 데이터의 중요성은 높아졌지만, 여전히 RDB는 중요하고, 앞으로도 중요하다는 것은 누가 부인할까

- 빅데이터 관점에서 현실상 RDB, Non-relational DB의 한계를 넘어서(?) 하둡을 적용하여 빅데이터를 다루는 회사는 대기업, 성장을 많이 한 회사이고, 그런 회사는 많지 않고 수요도 적음.

- 빅데이터에서도 정형 데이터 처리가 중요하기 때문에 RDB 설계와 이해는 필수

- DB 테이블 구조는 회사 기밀

- 관계형 데이터베이스를 설계하려면 비즈니스 도메인에 대한 깊은 이해, 데이터 분석 기술, 데이터베이스 원칙에 대한 지식이 필요

- 구조화된 데이터 저장 및 검색에 의존하는 애플리케이션을 개발하는 데 있어 매우 중요한 요소

<br>

### 관계형 데이터베이스 설계 RDB Design란?

<br>

- 관계형 데이터베이스 설계는 테이블과 테이블 간의 관계를 사용하여 데이터베이스의 데이터를 정의하고 구성하는 프로세스

> ***데이터를 효율적이고 효과적으로 저장하기 위한 논리적, 물리적 스키마를 만드는 작업***

- RDB 설계의 목표는 ***데이터베이스가 지원하는 비즈니스 프로세스의 데이터 요구사항을 정확하게 표현하여 데이터 무결성, 일관성 및 접근성을 보장하는 것***

<br>

### RDB 설계의 중요성

<br>

- 잘 설계된 관계형 데이터베이스는 데이터베이스의 효율성과 확장성, 안정성을 보장

- **데이터 무결성 및 일관성 보장**

- **데이터 검색 및 조작을 용이하게 함.**

- **복잡한 쿼리 및 트랜잭션 지원**

- **확장성 및 향후 성장 지원**

<br>

### RDB 설계 시 주요 개념

<br>

- 테이블 **Tables**: RDB의 데이터는 테이블에 저장되며, 각 테이블은 엔티티 유형을 나타냄. 예를 들어, '고객' 테이블에는 고객 정보가 저장되고 '주문' 테이블에는 주문 세부 정보가 저장될 수 있음.

- 열 **Columns**: 열은 **엔티티의 속성**을 정의. 예를 들면, "Customers" 테이블에는 "CustomerID", "FirstName", "LastName" 등의 열이 있을 수 있음.

- 행 **Rows**: 행은 엔티티의 **개별 인스턴스**를 나타냄. "Customers" 테이블의 각 행은 단일 고객을 나타냄.

- 기본 키 **Primary Keys**: 기본 키는 테이블의 **각 레코드를 고유하게 식별**함. *기본 키는 Null 값을 포함할 수 없으며 테이블의 모든 행에서 고유해야 함.* 일반적으로 자동 증가 정수 또는 고유 식별자를 사용

- 외래 키 **Foreign Keys**: 외래 키는 **두 테이블을 서로 연결**. 외래 키는 다른 테이블의 기본 키를 참조하여 테이블 간의 관계를 설정하므로 테이블 간의 상호 참조 역할을 함. 예를 들어, 'Orders' 테이블의 'OrderID' 열은 'Customers' 테이블의 'CustomerID'에 연결되는 외래 키 역할을 할 수 있음.

- 관계 **Relationships**: 관계는 테이블이 서로 상호 작용하는 방식을 정의함. 일대일, 일대다, 다대다의 세 가지 주요 유형이 있음. 효과적인 데이터베이스 설계를 위해서는 이러한 관계를 이해하고 올바르게 구현하는 것이 중요

- 정규화 **Normalization**: **관계형 데이터베이스의 열과 테이블을 정리하여 중복성과 종속성을 최소화하는 프로세스**. ***정규화는 큰 테이블을 작은 테이블로 나누고 그 사이의 관계를 정의함으로써 데이터 무결성을 유지하고 성능을 개선하는 데 도움이 됨.***

- 비정규화 **Denormalization**: 읽기 성능을 개선하기 위해 데이터베이스를 비정규화하기도 함. 비정규화에는 *관련 테이블을 단일 테이블로 결합하여 데이터를 검색하는 데 필요한 조인 횟수를 줄이는 작업이 포함*되지만, *저장 공간 증가와 잠재적인 데이터 중복이 발생할 수 있음*.

<br>

## 상향식 DB 디자인(설계)와 하향식 DB 디자인(설계)

<br>

- DB 설계 방법론은 상향식 접근 방식 top-down approach과 하향식 접근 방식 bottom-up approach의 두 가지 접근 방식이 있음. 각 접근 방식은 고유한 장점, 고려 사항, 이상적인 적용 시나리오가 있음.

- ***DB 설계 시 자주 언급되는 데이터 모델링 3단계는 Top-Down (하향식) 접근방식***임.

- 역시나 상향식과 하향식을 비교하며 통합하는 것이 가장 바람직

- 두 가지 접근 방식 모두 각자의 강점이 있으며, 단독으로 사용하기보다는 함께 사용하는 경우가 많음. 

- ***하향식 접근 방식으로 시작하고, 프로젝트가 진행됨에 따라 물리적 구현을 심화, 성능 최적화, 기술 문제 해결 위해 상향식 접근 방식을 적용하는 것을 반복함으로써 지속적으로 개선***

- 실제로 하향식으로 전체 방향 설계 → 상향식으로 특정 기술 문제 해결 방식을 반복하여 문제를 해결하는 경우가 많음. ***하향식, 상향식 DB 설계, 디자인 접근 방식을 통해 기능, 성능, 요구 사항을 모두 충족하는 균형 잡힌 디자인을 구현해가는 것이 중요***

<br>

### 하향식 접근 방식 Top-Down Approach of DB Design

<br>

- 하향식 접근 방식은 전체 시스템에 대한 거시적인 관점으로 시작한 다음, 점진적으로 구성 요소를 세분화함. 

- 개념적 모델링과 관련되며, 데이터베이스 설계의 초기 단계에서 특히 유용

<br>

**주요 특징**

<br>

- 높은 수준의 관점 **High-Level Perspective**: 시스템의 전반적인 목표와 요구 사항으로 시작하여 세부적인 사항을 살펴보기 전에 큰 그림에 집중

- 개념적 모델링 **Conceptual Modeling**: 다이어그램과 모델을 사용하여 세부적으로 분석하기 전에 전체 시스템의 구조와 관계를 시각화함.

- 반복적 개선 **Iterative Refinement**: 피드백 및 시스템 요구 사항에 대한 심층적인 인사이트를 바탕으로 모델을 개선하면서 반복을 통해 디자인을 발전시킴.

- 이상적인 시나리오 **Ideal Scenario**: 전체 아키텍처와 구성 요소 간의 상호 작용이 중요한, 복잡한 시스템을 다룰 때 유용. 특히 프로젝트의 초기 단계에서 이해관계자들이 시스템의 방향과 목표를 조율하는 데 유용

<br>

### 상향식 접근 방식 Bottom-Up Approach of DB Design

<br>

상향식 접근 방식은 개별 테이블, 필드, 관계 등 시스템의 가장 작은 구성 요소를 취합하여 전체 시스템을 구성하는 방식

<br>

**주요 특징**

<br>


- 세부 사항 지향 **Detail-Oriented**: 가장 작은 구성 요소부터 시작하여 시스템 전체에 이르기까지 데이터 저장의 세부 사항에 중점을 둠.

- 기술 구현 **Technical Implementation**: 설계 초기 단계부터 특정 기술, 데이터 유형, 인덱스 및 기타 기술 사양을 결정

- 점진적 개발 **Incremental Development**: 설계는 점진적으로 진행하고, 다음 단계로 넘어가기 전에 각 구성 요소를 개발하고 테스트

- 이상적인 시나리오 **Ideal Scenario**: 데이터와 데이터 구조에 대한 명확한 이해가 있고, 성능, 저장, 검색 메커니즘을 최적화하는 데 중점을 두는 경우에 유리. 데이터베이스가 상당한 양의 데이터를 처리할 것으로 예상되거나 특정 성능 특성이 중요한 경우에 특히 유용


<br>

## 상향식 DB 설계 절차

<br>

- 설계 절차를 통해 3가지 결과물을 도출하는 것이 바람직

> **Top-Down (하향식) 접근방식인 데이터 모델링 3단계**
> 
> ***개념적 데이터 모델링(E-R 다이어그램(개념스키마 도출)) 
> → 논리적 데이터 모델링(Relation 모델(논리적 스키마 도출)) 
> → 몰리적 데이터 모델링(물리적인 SQL 코드(데이터베이스 스키마 도출))***

- 비즈니스 및 관리 데이터 요구 사항 분석: 설계를 시작하기 전에 비즈니스 요구사항과 관리해야 할 데이터를 이해하고, 엔티티와 그 속성, 엔티티 간의 관계를 파악

- 엔티티와 속성 식별: 데이터베이스의 주요 개체(엔티티)와 그 속성(속성)을 결정. 예를 들어 전자상거래 애플리케이션에서 엔티티에는 고객, 제품 및 주문이 포함될 수 있음.

- 기본 키 정의: 각 테이블의 기본 키를 선택하여 레코드를 고유하게 식별함. 기본 키는 테이블의 모든 행에서 변경할 수 없고 고유해야 함.

- 관계 설정: 엔티티 간의 관계를 정의. 관계가 일대일인지, 일대다인지, 다대다인지 결정하고 그에 따라 외래 키를 설정.

- 데이터베이스 정규화: 데이터베이스를 정규화하여 중복성을 제거하고 데이터 무결성을 보장 필요. 정규화 형식(1NF, 2NF, 3NF, BCNF)을 따라 데이터를 정리

- 성능 고려: 설계 단계 초기에 쿼리 성능을 고려. 전략적으로 열 Column을 색인화하면 데이터 검색 속도를 크게 높일 수 있음.

- 확장성에 대한 계획: 확장성을 염두에 두고 데이터베이스를 설계. 적절한 데이터 유형 선택, 파티셔닝 전략, 필요한 경우 샤딩을 계획

- 제약 조건 구현: 데이터베이스 수준에서 데이터 무결성 규칙과 비즈니스 로직을 적용하려면 제약 조건(예: NOT NULL, UNIQUE, FOREIGN KEY)을 사용

- 설계 문서화: 테이블, 필드, 관계 및 설계 과정에서 이루어진 모든 가정을 포함한 데이터베이스 스키마를 문서화. ***좋은 문서는 유지 관리와 향후 개발에 매우 중요***

- 설계 테스트: 설계를 마무리하기 전에 샘플 데이터로 테스트하여, 요구 사항을 충족하고 예상되는 부하에서 제대로 작동하는지 확인

<br>

## RDB 설계 고려 요소

<br>


- 데이터 무결성 **Data Integrity**:: 적절한 제약 조건,  정규화 기법을 통해 데이터 수명 주기 내내  무결성을 유지하는지 확인

- 보안 **Security**: 민감한 정보를 보호하기 위한 액세스 제어, 암호화, 데이터의 안전한 전송 등 보안 고려

- 성능 **Performance**: 자주 쿼리하는 열을 색인화 indexing하고, 중복을 피하기 위해 데이터를 정규화하고, 데이터 유형과 크기를 신중하게 선택하여 성능을 최적화

- 확장성 **Scalability**: 확장 가능한 데이터 구조 선택, 큰 테이블 분할, 일관성을 위한 설계 등 고려

- 유지 관리 가능성 **Maintainability**: 향후 변경 사항 고려, 설계 모듈화, 의미 있는 이름을 사용하고, 결정 사항을 문서화


<br>

## RDB 설계 시 주의할 점

<br>


- 과도한 정규화 **Over-Normalization**: 정규화는 중복성을 줄이는 데 중요하지만, 지나친 정규화는 불필요한 복잡성과 성능 저하로 이어질 수 있습니다. 균형을 맞추기 위해 노력하세요.

- 성능을 위한 비정규화 **Denormalization for Performance**: 경우에 따라 비정규화를 통해 읽기 성능을 향상시킬 수 있습니다. 하지만 데이터 이상 현상과 스토리지 비용 증가로 이어질 수 있으므로 주의해야 합니다.

- 복잡한 조인 **Complex Joins**: 성능을 저하시킬 수 있는 지나치게 복잡한 조인 작업은 피하세요. 인덱스를 현명하게 사용하고 자주 액세스하는 데이터에 대해서는 비정규화를 고려하세요.

- 비기능 요구 사항 무시 **Ignoring Non-Functional Requirements**: 보안, 가용성, 백업/복구 계획과 같은 비기능적 요구 사항을 간과하지 마세요. 이러한 요건은 데이터베이스의 장기적인 성공을 위해 매우 중요합니다.

<br>

## 정규화 방법과 유용한 팁들

<br>

<br>

## 데이터베이스 관련 직군과 직무

<br>

- 데이터베이스 엔지니어

- 데이터베이스 관리자 (DBA)

- 데이터베이스 아키텍트 (DA)

- 데이터베이스 튜너

<br>
<br>

[참고자료]

DB 설계하는 법 (feat. 데이터 모델링)
<https://yeongunheo.tistory.com/entry/DB-%EC%84%A4%EA%B3%84%ED%95%98%EB%8A%94-%EB%B2%95-feat-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81>

토이프로젝트 해방일지 - 2. 데이터베이스 설계하기
<https://velog.io/@backfox/%ED%86%A0%EC%9D%B4%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%ED%95%B4%EB%B0%A9%EC%9D%BC%EC%A7%80-2.-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%84%A4%EA%B3%84%ED%95%98%EA%B8%B0>

DBA 입장에서 바라보는 데이터베이스 직군 이야기
<https://rastalion.dev/dba-%EC%9E%85%EC%9E%A5%EC%97%90%EC%84%9C-%EB%B0%94%EB%9D%BC%EB%B3%B4%EB%8A%94-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%A7%81%EA%B5%B0-%EC%9D%B4%EC%95%BC%EA%B8%B0/>